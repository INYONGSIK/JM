<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ucamp.JM.dao.MyMusicDAO">
    <select id="getMusicByMusicSinger" resultType="Music">
        select * from music where music_singer= #{music_singer}
    </select>
    <select id="myMusicList" parameterType="MyMusic" resultType="MyMusic">
        select
        B.list_name,
        B.playlist_cd,
        B.music_number,
        C.music_title,
        C.music_singer,
        C.music_genre,
        C.music_release,
        C.music_image,
        C.music_file
        from playlist B,
        music C
        where B.music_number = C.music_number
        and B.user_number = #{user_number}
        and B.list_name = #{list_name}
        order by C.music_number desc
    </select>

    <insert id="insertMyMusic" parameterType="MyMusic">
        insert into Music(music_number,music_title,music_singer,music_genre,music_release,
        music_image,music_file,music_lyrics)
        values(music_seq.nextval,#{music_title},#{music_singer},#{music_genre},#{music_release},
        #{music_image},#{music_file},#{music_lyrics})

        <!-- insert into playlist(
         PLAYLIST_CD,
         MUSIC_NUMBER,
         LIST_NAME,
         USER_NUMBER
         )values(
         (select nvl(max(playlist_cd),0) + 1 as new_playlist_cd
         from playlist),
         '44',
         'like',
         '9999'
         ); -->
    </insert>

    <delete id="delMyMusic">
        delete PLAYLIST_MANAGE
        where user_number = #{user_number}
        and list_name = #{list_name}

    </delete>

    <select id="maxMusicNumber" resultType="int">
        select max(playlist_cd) AS playlist_cd from playlist
    </select>
</mapper>
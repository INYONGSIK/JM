<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ucamp.JM.dao.AdminDAO">
    <select id="selectAllUserByReport" resultType="Admin">
        select j.user_number, j.user_email, j.user_name, j.user_phone_number, TO_CHAR(j.user_birthday, 'YYYY-MM-DD') as
        "user_birthday" , r.report_count
        from jmuser j, report r
        where j.user_number = r.user_number
        order by r.report_count desc
    </select>

    <select id="selectReportByType" parameterType="int" resultType="Report">
        select user_number,report_ID, report_type, TO_CHAR(REPORT_DATE, 'YYYY-MM-DD HH24:MI:SS') AS "REPORT_DATE"
        ,report_count, contents, dashboard_No, music_number
        from report
        where report_type = #{report_type}
    </select>

    <insert id="reportMusic" parameterType="Map">
        insert into report
        (user_number, report_ID,report_type,contents,report_count,music_number)
        values (${user_number},report_seq.nextval,2,'${contents}',0,${music_number})
    </insert>

    <delete id="deleteMusic">
        delete from music where music_number=${music_number}
    </delete>

    <delete id="deleteReportMusic">
        delete from report where music_number=${music_number}
    </delete>

</mapper>
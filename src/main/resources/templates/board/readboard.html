<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>readboard</title>

</head>
<link rel="stylesheet" href="/webapp/css/bootstrapLux.css"/>
<body>

<div>
    <legend>게시글 상세보기</legend>
</div>

<br><br><br><br><br><br>


<div>


    <div class="form-group">
        <label class="form-label">글쓴이</label>
        <input class="form-control" type="text" th:placeholder="${dashboard_user}" disabled="">
    </div>

    <br>

    <div class="form-group">
        <label class="form-label">제 목</label>
        <input class="form-control" type="text" th:placeholder="${dashboard_title}" disabled="">
    </div>

    <br>

    <div class="form-group">
        <label class="form-label">내 용</label>
        <input class="form-control" type="text" th:placeholder="${dashboard_content}" disabled="">
    </div>

    <br>

    <form style="float:left;margin:0;" th:action="|/editBoardForm/${dashboard_No}|"/>
    <button type="submit" class="btn btn-secondary" th:if="${session.user_email}">수정</button>
    </form>


    <form style="float:left;margin:0;" method="get"
          th:action="|/deletedashboard/${dashboard_No}/${dashboard_user}|">

        <input type="hidden" name="dashboard_No" value="${dashboard_No}"/>
        <button type="submit" class="btn btn-secondary" th:if="${session.user_email}">삭제</button>
    </form>
    <button type="button" class="btn btn-secondary" onclick="window.location='/boardList'">돌아가기</button>
    <br><br><br><br><br>



    <form th:if="${session.user_email}" action="/comment">
        <input type="hidden" id="dashboard_No" name="dashboard_No" th:value="${dashboard_No}">
        <input type="hidden" id="writer" name="writer" th:value="${sessionName}">
        <div class="input-group mb-3">
            <legend>댓글 </legend>
            <input  class="form-control" type="text" name="comment"> <button class="btn btn-primary" type="submit" id="comment">submit</button>
        </div>
    </form>

    <div>
        <p class="badge rounded-pill bg-primary" >댓글</p>
        <table>
            <tr th:each="comment : ${comments}">
                <td width="100"><p class="lead">[[${comment.writer}]]</p></td>
                <td width="200"><p class="lead">[[ ${comment.content}]]</p></td>
                <td width="200"><p class="lead">[[${comment.createat}]]</p></td>


                <td><a th:href="|/reportComment/${comment.writer}/${comment.content}/${comment.dashboard_no}|"><p class="lead">신고</p></a>
                </td>

                <td th:if="${sessionName == comment.writer}"><a
                        th:href="|/deleteComment/${comment.dashboard_no}/${comment.cno}/${comment.content}/${comment.writer}|"><p class="lead">삭제</p></a></td>
                <td th:if="${admin == 'admin@aaa.com'}"><a
                        th:href="|/deleteComment/${comment.dashboard_no}/${comment.cno}/${comment.content}/${comment.writer}|"><p class="lead">삭제</p></a></td>
            </tr>

        </table>

    </div>


</div>

</body>
<th:block th:replace="header :: header">
</th:block>
<script th:inline="javascript">
    /*<![CDATA[*/
        var dashboardNo = $("#dashboard_No").val();
        var replyWriter = $("#writer").val();
        var boardWriter = /*[[${dashboard_user}]]*/;
     /*]]>*/
        $("#comment").click(function(){
             if(socket){
             console.log("들어옴");
            // (reply, 댓글작성자,게시글작성자,글번호)
            socket.send("reply," + replyWriter + "," + boardWriter + "," + dashboardNo);
        }
        })


</script>
</html>
<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>자음모음</title>





</head>
<link rel="stylesheet" href="/webapp/css/bootstrapLux.css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="webapp/css/register.css"/>
<link rel="stylesheet" href="/webapp/css/font.css"/>
<body>
<th:block th:replace="~{navHeaderMain :: naviMain}"></th:block>
<br><br><br><br><br>
<div class="container">
    <div>
        <label class="form-label">글쓴이</label>
        <input class="form-control" type="text" th:placeholder="${dashboard_user}" disabled="">
    </div>

    <br>

    <div>
        <label class="form-label">제 목</label>
        <input class="form-control" type="text" th:placeholder="${dashboard_title}" disabled="">
    </div>

    <br>

    <div>
        <label class="form-label">내 용</label>
        <textarea class="form-control" type="text" th:placeholder="${dashboard_content}" disabled="" rows="10"></textarea>
    </div>

    <br>

    <form style="float:left;margin:0;" th:action="|/editBoardForm/${dashboard_No}|"/>
    <input type="submit" class="btn btn-primary" th:if="${session.user_email}" value="수정">
    </form>


    <form style="float:left;margin:0;" method="get"
          th:action="|/deletedashboard/${dashboard_No}/${dashboard_user}|">

        <input type="hidden" name="dashboard_No" value="${dashboard_No}"/>
        <input type="submit" class="btn btn-primary" th:if="${session.user_email}" value="삭제">
    </form>
    <input type="button" class="btn btn-primary" onclick="window.location='/boardList'" value="돌아가기">
    <br><br>



    <form th:if="${session.user_email}" action="/comment" name="c" onsubmit="return check()">
        <input type="hidden" id="dashboard_No" name="dashboard_No" th:value="${dashboard_No}">
        <input type="hidden" id="writer" name="writer" th:value="${sessionName}">
        <div class="input-group mb-3">
            <legend>댓글 </legend>
            <input  class="form-control" type="text" name="comment" id="comment">
            <button class="btn btn-primary" type="submit" >submit</button>
        </div>
    </form>

    <div>
        <p class="badge rounded-pill bg-primary" >댓글</p>
        <table>
            <tr th:each="comment : ${comments}">
                <td width="100"><p class="lead">[[${comment.writer}]]</p></td>
                <td width="200"><p class="lead">[[ ${comment.content}]]</p></td>
                <td width="200"><p class="lead">[[${comment.createat}]]</p></td>


                <td th:if="${sessionName != comment.writer}"><a  th:href="|/reportComment/${comment.writer}/${comment.content}/${comment.dashboard_no}|"><p class="lead">신고</p></a>
                </td>

                <td th:if="${sessionName == comment.writer}"><a
                        th:href="|/deleteComment/${comment.dashboard_no}/${comment.cno}/${comment.content}/${comment.writer}|"><p class="lead">삭제</p></a></td>
                <td th:if="${admin == 'admin@aaa.com'}"><a
                        th:href="|/deleteComment/${comment.dashboard_no}/${comment.cno}/${comment.content}/${comment.writer}|"><p class="lead">삭제</p></a></td>
            </tr>

        </table>

    </div>


</div>

</body>
<th:block th:replace="header :: header">
</th:block>
<script th:inline="javascript">
    /*<![CDATA[*/
        var dashboardNo = $("#dashboard_No").val();
        var replyWriter = $("#writer").val();
        var boardWriter = /*[[${dashboard_user}]]*/;
     /*]]>*/
        $("#comment").click(function(){
             if(socket){
             console.log("들어옴");
            // (reply, 댓글작성자,게시글작성자,글번호)
            socket.send("reply," + replyWriter + "," + boardWriter + "," + dashboardNo);
        }
        })
</script>
<script type="text/javascript" >
    function check(){
        if(c.comment.value==""){
            alert("댓글을 입력해 주세요!!");
            return false
        }
        return true
    }
</script>
</html>